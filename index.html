<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Language Text Generator</title>
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/bootstrap.css">
</head>
<body class="container">
	<h1>Language Text Generator v2017</h1>
	<form name="theform">
		<div class="row">
			<div class="col-sm-4">
				<div class="form-group">
					<label for="cats">Categories</label>
					<textarea class="form-control" id="cats" name="cats" rows="10">C=ptkbdg&#13;&#10;R=rl&#13;&#10;V=ieaou</textarea>
				</div>
			</div>
			<div class="col-sm-4">
				<div class="form-group">
					<label for="rewrite">Rewrite rules</label>
					<textarea class="form-control" id="rewrite" name="rewrite" rows="10">ki|&#x010d;i</textarea>
				</div>
			</div>
			<div class="col-sm-4">
				<div class="form-group">
					<label for="syls">Syllable types</label>
					<textarea class="form-control" id="syls" name="syls" rows="10">CV&#13;&#10;V&#13;&#10;CRV</textarea>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-3">
				<h4>Output type</h4>
				<div class="radio">
					<label>
						<input type ="radio" name="outtype" value="text" checked />
						Text output
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="outtype" value="dict" />
						Wordlist as table
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="outtype" value="longdict" />
						Wordlist
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="outtype" value="genall" />
						All possible syllables
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Syllable settings</h4>
				<div class="checkbox">
					<label>
						<input type="checkbox" name="showsyl" />
						Show syllables
					</label>
				</div>
				<div class="checkbox">
					<label>
						<input type="checkbox" name="slowsyl" />
						Slow syllable dropoff
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Dropoff</h4>
				<div class="radio">
					<label>
						<input type ="radio" name="dropoff" value="F" />
						Fast
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="dropoff" value="M" checked />
						Medium
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="dropoff" value="S" />
						Slow
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="dropoff" value="L" />
						Molasses
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="dropoff" value="E" />
						Equiprobable
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Monosyllables</h4>
				<div class="radio">
					<label>
						<input type ="radio" name="monosyl" value="A" />
						Always
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="monosyl" value="M" />
						Mostly
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="monosyl" value="F" />
						Frequent
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="monosyl" value="LF" checked />
						Less frequent
					</label>
				</div>
				<div class="radio">
					<label>
						<input type ="radio" name="monosyl" value="R" />
						Rare
					</label>
				</div>
			</div>
		</div>
		
		<div class="text-center">
			<div class="btn-group">
				<a class="btn btn-primary" role="button" onClick="process();">Generate</a>
				<div class="btn-group">
					<button type="button" class="btn btn-default" data-toggle="modal" data-target="#generalHelp">Help me!</button>
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<span class="caret"></span>
						<span class="sr-only">Toggle Dropdown</span>
					</button>
					<ul class="dropdown-menu">
						<li><a role="button" data-toggle="modal" data-target="#categoriesModal">Categories</a></li>
						<li><a role="button" data-toggle="modal" data-target="#rewriteModal">Rewrite rules</a></li>
						<li><a role="button" data-toggle="modal" data-target="#generalHelp">Syllable types</a></li>
					</ul>
				</div>
				<a class="btn btn-default hidden-xs" role="button" onClick="parsecat();">Parse cats</a>
				<a class="btn btn-default hidden-xs" role="button" onClick="intocat();">Back to cats</a>
				<a class="btn btn-default hidden-xs" role="button" onClick="showipa();">IPA</a>
				<a class="btn btn-default hidden-xs" role="button" onClick="defaultme();">Defaults</a>
				<div class="btn-group">
  					<button type="button" class="btn btn-default dropdown-toggle visible-xs-block" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Actions <span class="caret"></span>
					</button>
					<ul class="dropdown-menu">
						<li><a role="button" data-toggle="modal" data-target="#generalHelp">Help me!</a></li>
						<li><a role="button" onClick="parsecat();">Parse cats</a></li>
						<li><a role="button" onClick="intocat();">Back to cats</a></li>
						<li><a role="button" onClick="showipa();">IPA</a></li>
						<li><a role="button" onClick="defaultme();">Defaults</a></li>
  					</ul>
				</div>
				<a class="btn btn-danger" role="button" onClick="erase();">Clear output</a>
			</div>
		</div>

		<h3>Output</h3>
		<div id="mytext"></div>
	</form>

	<div class="modal fade" id="generalHelp" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About</h3>
				</div>
				<div class="modal-body">
					<p>I’ve long advocated either hand-crafting every word, or using the <a href="http://www.zompist.com/sounds.htm">Sound Change Applier</a> to derive families. But inspiration does flag, and sometimes you want to use a vocabulary generator.</p>
					<p>The usual problem with these is that they make all the possibilities equiprobable, which is highly unnaturalistic. So I’ve created a generator called <a href="http://www.zompist.com/gen.html">gen</a>, which applies a cheap power law, so the first choice is chosen most often, and so on down, smoothly, to the last choice which get chosen the least.</p>
					<h3>Example</h3>
					<p>With the default settings, you’ll get a pseudo-text, like this:</p>
					<blockquote><p>Tapi opii piiai kledri pripaipu ota dopiči. Pluda detutra i uebopo giplao bi tra itra. Ii aedu baebu brobie tiglea brobo. Kaba do paepibe čipiduka igapri pripe. I di o etu epei e. Pe ibrapa io pebibri ti. Pai be klečii klu priple edi. Itekla pu pi uake preegi pipipii? Aketleii kakliokre ebao tiči opieti ebi utrii tii? Tepi pepi piipetrete gea čipu tripidipu? Itika poa be. A piiba i tiidie pleba tipači. Ei pibo giotoe tekebiblopi čii ti budetru pipudode? Apii kuke tepi kebi plečitrebri.</p></blockquote>
					<h3>Controls</h3>
					<dl>
						<dt>Output type</dt>
						<dd>Tells whether you want pseudo-text, or a table of a hundred words. Pseudo-text is better for seeing what your language looks like, given the phonology and syllable types you’ve defined. Once you’re happy with the look and feel of the language, the word list is better for actually generating vocabulary.</dd>
						<dt>All possible syllables</dt>
						<dd>Output a list of all possible syllables. This option <strong>ignores the Dropoff and Monosyllables controls</strong>: it is not random at all, and it shows only single syllables.</dd>
						<dt>Show syllables</dt>
						<dd>Displays a dot between syllables in the output. A syllable is whatever you put in <em>Syllable types</em>.</dd>
						<dt>Dropoff</dt>
						<dd>Determines how fast the power law declines. If you have <code>C=ptkbdg</code>, then when outputing a <code>C</code>, normally <code>p</code> will come up the most, <code>t</code> a little less often, and so on, with <code>g</code> the least frequent. If you select fast dropoff, the probabilities will stack even more in favor of <code>p</code> (i.e. the first choice). If you select slow, the probabilities will distribute more evenly.</dd>
						<dt>Equiprobable</dt>
						<dd>To turn off the power law entirely select <em>Equiprobable</em>, then gen will select the choices with equal frequency (again, this is a bad choice for a naturalistic language. But maybe you’re doing an auxlang or something).</dd>
						<dt>Slow syllable dropoff.</dt>
						<dd>The <em>Dropoff</em> control doesn't affect the selection of syllable types. However, you can choose a more even distribution by checking <em>Slow syllable dropoff</em>.</dd>
						<dt>Monosyllables</dt>
						<dd>Tells how much of the output should be monosyllabic. You could set this to <em>Always</em> for an isolating language, for instance (even isolating languages have compounds, so if you want to generate words or text, use <em>Mostly</em>).</dd>
					</dl>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="categoriesModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About Categories</h3>
				</div>
				<div class="modal-body">
					<p>These are your phonological classes, defined by enumeration. The format is exactly the same as used by the <a href="http://www.zompist.com/sounds.htm">Sound Change Applier</a>. For instance, I might define my fricatives like this:</p>
					<pre>F=fvszšž</pre>
					<p>That means that any time gen wants to output an F from the syllables list, it will randomly pick one of <code>f</code>, <code>v</code>, <code>s</code>, <code>z</code>, <code>š</code>, <code>ž</code>. As you can see, you can use Unicode! The phonemes in a category have to be single characters, but we’ll see how to output digraphs below.</p>
					<p>The key thing to grasp is that the <strong>order determines the probability.</strong> The program runs through the phonemes in a category, with a 30% chance of stopping<sup>see below</sup> at each one. So the <code>F</code> definition above says that we want <code>f</code> to occur a lot and <code>ž</code> not that much.</p>
					<p><small>That is, 30% for the recommended Medium dropoff. It’s 45% for <em>Fast</em> and 15% for <em>Slow</em>. Also, for computation speed, if it gets to the end of the choices it starts over.</small></p>
					<p>The main corollary: Put the sounds you like first! Don’t list them in place of articulation order unless you really like labials. Try varying the order and hitting Generate to see how changing the order changes the output. Don’t overdo the classes - gen doesn’t know any phonology, and will be perfectly happy with a single class C for all consonants. You define a class for two reasons:</p>
					<ul>
						<li>To control probabilities. E.g. we usually want stops to occur more than fricatives.</li>
						<li>To enforce phonotactics. E.g. if the only initial clusters you allow are stop + liquid, then you need classes for stops and liquids.</li>
					</ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="rewriteModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About Categories</h3>
				</div>
				<div class="modal-body">

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<script src="js/jquery-3.1.1.min.js"></script>
	<!--<script src="js/bootstrap-init.js"></script>-->
	<script src="js/bootstrap.js"></script>
	<script src="js/script.js"></script>
</body>
</html>