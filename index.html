<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Language Text Generator</title>
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/bootstrap.css">
</head>
<body class="container">
	<div class="row">
		<div class="col-sm-12 fancy-header">
			<h1>Language Text Generator v2017.3</h1>
		</div>
	</div>
	<form name="theform">
		<div class="row">
			<div class="col-sm-4">
				<div class="form-group">
					<label for="cats">Categories</label>
					<textarea class="form-control" id="cats" name="cats" rows="7"></textarea>
				</div>
			</div>
			<div class="col-sm-4">
				<div class="form-group">
					<label for="rewrite">Rewrite rules</label>
					<textarea class="form-control" id="rewrite" name="rewrite" rows="7"></textarea>
				</div>
			</div>
			<div class="col-sm-4">
				<div class="form-group">
					<label for="syls">Syllable types</label>
					<textarea class="form-control" id="syls" name="syls" rows="7"></textarea>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-3">
				<h4>Output type</h4>
				<div class="radio">
					<label>
						<input id="outType-contText" type ="radio" name="outtype" value="text" checked />
						Continuous text
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="outType-table" type ="radio" name="outtype" value="dict" />
						10-by-15 Wordlist (as table)
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="outType-wordlist" type ="radio" name="outtype" value="longdict" />
						Wordlist
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="outType-all" type ="radio" name="outtype" value="genall" />
						All possible syllables
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Syllable settings</h4>
				<div class="checkbox">
					<label>
						<input id="syls-show" type="checkbox" name="showsyl" />
						Show syllables
					</label>
				</div>
				<div class="checkbox">
					<label>
						<input id="syls-slow" type="checkbox" name="slowsyl" />
						Slow syllable dropoff
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Dropoff</h4>
				<div class="radio">
					<label>
						<input id="dropoff-fast" type ="radio" name="dropoff" value="F" />
						Fast
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="dropoff-medium" type ="radio" name="dropoff" value="M" checked />
						Medium
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="dropoff-slow" type ="radio" name="dropoff" value="S" />
						Slow
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="dropoff-molasses" type ="radio" name="dropoff" value="L" />
						Molasses
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="dropoff-eq" type ="radio" name="dropoff" value="E" />
						Equiprobable
					</label>
				</div>
			</div>
			<div class="col-sm-3">
				<h4>Monosyllables</h4>
				<div class="radio">
					<label>
						<input id="monosyl-always" type="radio" name="monosyl" value="A" />
						Always
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="monosyl-mostly" type="radio" name="monosyl" value="M" />
						Mostly
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="monosyl-freq" type="radio" name="monosyl" value="F" />
						Frequent
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="monosyl-less" type="radio" name="monosyl" value="LF" checked />
						Less frequent
					</label>
				</div>
				<div class="radio">
					<label>
						<input id="monosyl-rare" type="radio" name="monosyl" value="R" />
						Rare
					</label>
				</div>
			</div>
		</div>
		
		<div id="controls" class="row">
			<div id="load-message" class="alert alert-info alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true" onclick="neuterOpenStyle();">&times;</span></button>
				<strong>Save file present!</strong> You have settings saved in your browser's local storage. If you want to see it, click Open. Or you can <a href="#" class="alert-link" onclick="deleteJSON();">delete</a> it if you want.
			</div>
			<div id="btn-options-panel" class="text-center">
				<div class="btn-group">
					<a class="btn btn-primary" role="button" onClick="process();">Generate</a>
					<div class="btn-group">
						<button type="button" class="btn btn-default" data-toggle="modal" data-target="#generalHelp">Help me!</button>
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class="caret"></span>
							<span class="sr-only">Toggle Dropdown</span>
						</button>
						<ul class="dropdown-menu">
							<li><a role="button" data-toggle="modal" data-target="#categoriesModal">Categories</a></li>
							<li><a role="button" data-toggle="modal" data-target="#rewriteModal">Rewrite rules</a></li>
							<li><a role="button" data-toggle="modal" data-target="#syllableModal">Syllable types</a></li>
						</ul>
					</div>
					<a class="btn btn-default hidden-xs" role="button" data-toggle="modal" data-target="#ipaModal">IPA</a>
					<a class="btn btn-default hidden-xs" id="btn-save" role="button" onClick="saveToJSON();">Save</a>
					<a class="btn btn-warning hidden-xs" id="btn-open" role="button" onClick="loadFromJSON();">Open</a>
					<a class="btn btn-default hidden-xs" role="button" onClick="defaultme();">Cycle presets</a>
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle visible-xs-block" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Actions <span class="caret"></span>
						</button>
						<ul class="dropdown-menu">
							<li><a role="button" data-toggle="modal" data-target="#ipaModal">IPA</a></li>
							<li><a role="button" onClick="saveToJSON();">Save</a></li>
							<li><a id="btn-open" class="btn btn-warning" role="button" onClick="loadFromJSON();">Open</a></li>
							<li><a role="button" onClick="defaultme();">Cycle presets</a></li>
						</ul>
					</div>
					<a class="btn btn-default" role="button" onClick="erase();">Clear output</a>
					<a class="btn btn-danger" role="button" onClick="clearAll();">Clear all</a>
				</div>
			</div>
		</div>

		<h3>Output</h3>
		<div id="mytext"></div>
	</form>

	<div class="modal fade" id="generalHelp" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About</h3>
				</div>
				<div class="modal-body">
					<blockquote>
						<p>I’ve long advocated either hand-crafting every word, or using the <a href="http://www.zompist.com/sounds.htm">Sound Change Applier</a> to derive families. But inspiration does flag, and sometimes you want to use a vocabulary generator.</p>
						<p>The usual problem with these is that they make all the possibilities equiprobable, which is highly unnaturalistic. So I’ve created a generator called <a href="http://www.zompist.com/gen.html">gen</a>, which applies a cheap power law, so the first choice is chosen most often, and so on down, smoothly, to the last choice which get chosen the least.</p>
						<footer>
							Mark Rosenfelder
						</footer>
					</blockquote>
					<h3>Example</h3>
					<p>With the default settings, you’ll get a pseudo-text, like this:</p>
					<blockquote><p>Tapi opii piiai kledri pripaipu ota dopiči. Pluda detutra i uebopo giplao bi tra itra. Ii aedu baebu brobie tiglea brobo. Kaba do paepibe čipiduka igapri pripe. I di o etu epei e. Pe ibrapa io pebibri ti. Pai be klečii klu priple edi. Itekla pu pi uake preegi pipipii? Aketleii kakliokre ebao tiči opieti ebi utrii tii? Tepi pepi piipetrete gea čipu tripidipu? Itika poa be. A piiba i tiidie pleba tipači. Ei pibo giotoe tekebiblopi čii ti budetru pipudode? Apii kuke tepi kebi plečitrebri.</p></blockquote>
					<h3>Controls</h3>
					<dl>
						<dt>Output type</dt>
						<dd>Tells whether you want pseudo-text, or a table of a hundred words. Pseudo-text is better for seeing what your language looks like, given the phonology and syllable types you’ve defined. Once you’re happy with the look and feel of the language, the word list is better for actually generating vocabulary.</dd>
						<dt>All possible syllables</dt>
						<dd>Output a list of all possible syllables. <strong>This option ignores the Dropoff and Monosyllables controls</strong>: it is not random at all, and it shows only single syllables.</dd>
						<dt>Show syllables</dt>
						<dd>Displays a dot between syllables in the output. A syllable is whatever you put in <em>Syllable types</em>.</dd>
						<dt>Dropoff</dt>
						<dd>Determines how fast the power law declines. If you have <code>C=ptkbdg</code>, then when outputing a <code>C</code>, normally <code>p</code> will come up the most, <code>t</code> a little less often, and so on, with <code>g</code> the least frequent. If you select fast dropoff, the probabilities will stack even more in favor of <code>p</code> (i.e. the first choice). If you select slow, the probabilities will distribute more evenly.</dd>
						<dt>Equiprobable</dt>
						<dd>To turn off the power law entirely select <em>Equiprobable</em>, then gen will select the choices with equal frequency (again, this is a bad choice for a naturalistic language. But maybe you’re doing an auxlang or something).</dd>
						<dt>Slow syllable dropoff.</dt>
						<dd>The <em>Dropoff</em> control doesn't affect the selection of syllable types. However, you can choose a more even distribution by checking <em>Slow syllable dropoff</em>.</dd>
						<dt>Monosyllables</dt>
						<dd>Tells how much of the output should be monosyllabic. You could set this to <em>Always</em> for an isolating language, for instance (even isolating languages have compounds, so if you want to generate words or text, use <em>Mostly</em>).</dd>
					</dl>
					<h4>About the app</h4>
					<p>Original generator written by Mark Rosenfelder (<a href="http://zompist.com">zompist.com</a>)</p>
					<p>"v2017" written by Zsolt Boda (<a href="http://bodzaital.github.io">bodzaital.github.io</a>)</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="categoriesModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About Categories</h3>
				</div>
				<div class="modal-body">
					<p>These are your phonological classes, defined by enumeration. The format is exactly the same as used by the <a href="http://www.zompist.com/sounds.htm">Sound Change Applier</a>. For instance, I might define my fricatives like this:</p>
					<pre>F=fvszšž</pre>
					<p>That means that any time gen wants to output an <code>F</code> from the syllables list, it will randomly pick one of <code>f</code>, <code>v</code>, <code>s</code>, <code>z</code>, <code>š</code>, <code>ž</code>. As you can see, you can use Unicode! The phonemes in a category have to be single characters, but you can output digraphs using Rewrite rules.</p>
					<p>The key thing to grasp is that the <strong>order determines the probability.</strong> The program runs through the phonemes in a category, with a 30% chance of stopping<sup>see below</sup> at each one. So the <code>F</code> definition above says that we want <code>f</code> to occur a lot and <code>ž</code> not that much.</p>
					<p><small>That is, 30% for the recommended Medium dropoff. It’s 45% for <em>Fast</em> and 15% for <em>Slow</em>. Also, for computation speed, if it gets to the end of the choices it starts over.</small></p>
					<p>The main corollary: Put the sounds you like first! Don’t list them in place of articulation order unless you really like labials. Try varying the order and hitting Generate to see how changing the order changes the output. Don’t overdo the classes - gen doesn’t know any phonology, and will be perfectly happy with a single class <code>C</code> for all consonants. You define a class for two reasons:</p>
					<ul>
						<li>To control probabilities. For example we usually want stops to occur more than fricatives.</li>
						<li>To enforce phonotactics. For example if the only initial clusters you allow are stop + liquid, then you need classes for stops and liquids.</li>
					</ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="rewriteModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About Rewrite rules</h3>
				</div>
				<div class="modal-body">
					<p>These allow you to apply global substitutions to the output. The simplest form is to replace a single character:</p>
					<pre>θ|th</pre>
					<p>That tells the program to replace every occurence of <code>θ</code> in the output with <code>th</code>.</p>
					<p>Or you can handle combinations. For example maybe <code>ti</code> always changes to <code>či</code>. You'd write that as <code>ti|či</code>. The facility is actually even more powerful than that, because the left-hand side is a regular expression. So for instance you could change both <code>br</code> and <code>bl</code> to <code>bj</code> with the formula <code>b[rl]|bj.</code></p>
					<p>Rules are applied in order. Make sure they don’t feed into each other when they shouldn’t (see the <a href="http://www.zompist.com/genhelp.html#japan">Japanese example here</a> for more on this). For fancier changes (such as those that are sensitive to the following phonemes), use the <a href="http://www.zompist.com/sounds.htm">Sound Change Applier</a>.</p>
					<p>You don’t have to have any rewrite rules at all, of course (the other inputs have to have something in them).</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="syllableModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">About Rewrite rules</h3>
				</div>
				<div class="modal-body">
					<p>The Syllable types field defines your phonotactics... your allowed syllable types. For example the sample above is defined with these syllables:</p>
					<pre>CV&#13;&#10V&#13;&#10CRV</pre>
					<p>The syllable types also follow a power law, so put the ones you like first. Or to be precise, if you want a particular type to be more common, move it up in the list. Put just one syllable per line (otherwise gen will just treat whatever you put on one line as a syllable type). In general, more complex types should occur further on. However, I find that pure vowel syllables (like V in the example) should be less frequent than ones that begin with a consonant.</p>
					<p>The process does not handle parentheses. So if you have a syllable type like <code>(C(R))V(V)(N)</code>, you must list the possibilities— in this case, <code>V</code>, <code>VV</code>, <code>VN</code>, <code>VVN</code>, <code>CV</code>, <code>CVV</code>, <code>CVN</code>, <code>CVVN</code>, <code>CRV</code>, <code>CRVV</code>, <code>CRVN</code>, <code>CRVVN</code>. This is a good thing, because it allows you to set the relative probabilities of each syllable type (how do you decide on the order? Trial and error works fine. Change the order and hit Generate again. Repeat till it looks good).</p>
					<p>The symbols you use here (in the last example <code>C</code>, <code>V</code>, <code>R</code>, <code>N</code>) must be defined in the categories box— they are your phonological classes.</p>
					<p>So when gen needs to generate a syllable, it selects randomly from the syllable type - lets say it picks <code>CRV</code>. Now it looks up <code>C</code> in the <em>Categories</em> box. Suppose it finds the definition <code>C=ptkbdg</code>. It randomly picks one of those choices. Then it moves on to <code>R</code>, then <code>V</code>. And so on.</p>
					<p>If there are any undefined symbols, they will be passed through to the output. For example you could add a syllable <code>khV</code> and gen will cheerfully generate <code>khe</code>, <code>khi</code>, etc.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="ipaModal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h3 class="modal-title" id="myModalLabel">IPA tables</h3>
				</div>
				<div class="modal-body">
					<p><strong>Open these in a new tab</strong> then copy and paste the IPA symbols into the <em>Categories</em> box.</p>
					<p>Any single character is valid, </strong>, i.e. <code>ts</code> and <code>q͡ʡ</code> is not legal, but <code>ʎ̝</code> and <code>ɲ̊</code> is.</p>
					<a class="btn btn-lg btn-default btn-block" role="button" href="https://en.wikipedia.org/wiki/Template:IPA_chart/table_vowels">IPA vowel table</a>
					<a class="btn btn-lg btn-default btn-block" role="button" href="https://en.wikipedia.org/wiki/Template:IPA_consonant_chart">IPA consonant table</a>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
				</div>
			</div>
		</div>
	</div>

	<script src="js/jquery-3.1.1.min.js"></script>
	<script src="js/bootstrap-init.js"></script>
	<script src="js/bootstrap.js"></script>
	<script src="js/script.js"></script>
</body>
</html>